## turk-chat conversation agent
<sub>_If you're looking for the older async pygame version: https://github.com/KF-R/turk-chat-pygame_</sub>
<hr/>

<img src="https://github.com/KF-R/turk-chat/assets/6677966/1896d8b8-7108-4cd2-a76b-edb28bdca90a" width="230px" align="right"/>

### Features:
* Ultra-lightweight; only a Python Flask server and a single html file with in-line vanilla JS
* Integrated ring buffer, sound activity detection algorithm and real-time animated speech visualization.
* Automatic speech detection with termination detection; no push-to-talk or activation (listens, responds, listens... )
* Speech is recorded, transcribed by OpenAI Whisper (optionally locally or via API)
* Transcribed speech, along with full chat history, is submitted to OpenAI API for a chat response.
* Response is filtered for numbers, code blocks etc. in order to provide more naturalistic TTS.
* Filtered response is read via ElevenLabs Text-To-Speech API.
* Spoken response is visualized by way of a real-time animation.
* After the spoken response is complete, listening is resumed in order to facilitate fluid on-going conversation.

### Usage:
* Install requirements
* Set up API keys (See below and/or `my_env.py.example`)
* Launch `turk_flask.py`, which is a Python Flask application.  
* Visit localhost port 5000 in your browser (e.g. `https://127.0.0.1:5000/`)
* Approve the ad-hoc SSL certificate to authorise the page.
* Click the `Start Listening` button.  The first time you do this, you'll be asked to grant permissions to your microphone.
* Start talking.  Be patient with the response.
* After your chat agent has finished speaking its response, it will automatically resume listening.
* The `Voice` drop-down list is populated with the voice names from your ElevenLabs voice library.  
* You can change the responding voice without affecting the on-going conversation
* To stop listening, click the `Stop Listening` button or refresh the page.
* To clear/archive the chat message and engine logs, click the `Reset` button. 
* Archived conversations will be stored in the `archive` directory.
* Code blocks generated by your chat partner will be stored in the `sandbox` directory.
* Previously recorded .wav files are kept in `audio_in`
* Previously generated .mp3 files are kept in `audio_out`
<hr/>

_**API keys:**_

As written, it expects `'my_env.py'` in your home directory; its contents defining API keys as follows:
  
```
API_KEY_OPENAI = '<insert_your_OpenAI_API_key_here>'
API_KEY_ELEVENLABS = '<insert_your_ElevenLabs_API_key_here>'
```

